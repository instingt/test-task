webpackJsonp([1],{Ivg2:function(e,t){},Jie8:function(e,t){},NHnr:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n("7+uW"),s=n("NYxO"),a=n("Xxa5"),i=n.n(a),o=n("exGp"),c=n.n(o),u=n("//Fk"),l=n.n(u),p=n("Zrlr"),f=n.n(p),d=n("wxAW"),h=n.n(d),v=n("d7EF"),m=n.n(v),g=n("W3Iv"),_=n.n(g),b=n("mtWM"),x=n.n(b),k={users:"/users",user:"/users/:userId",basket:"/basket",grub:"/users/:userId/grab",freeApples:"/apples/free"};function A(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=k[e];if(!n)throw new Error("Can not find route "+n+" in routeMap");return _()(t).forEach(function(e){var t=m()(e,2),r=t[0],s=t[1];n=n.replace(":"+r,s)}),n}var L=new(function(){function e(){f()(this,e);var t=x.a.create({baseURL:"http://hrtest.alycedev.com/"});t.interceptors.response.use(function(e){return e.data},function(e){return l.a.reject(e)}),this.axios=t}return h()(e,[{key:"users",value:function(){return this.axios.get(A("users"))}},{key:"userById",value:function(e){return this.axios.get(A("user",{userId:e}))}},{key:"basket",value:function(){return this.axios.get(A("basket"))}},{key:"grub",value:function(){var e=c()(i.a.mark(function e(t){var n;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.axios.get(A("grub",{userId:t}));case 2:if(!(n=e.sent).success){e.next=5;break}return e.abrupt("return",n);case 5:throw new Error(n.error||"Internal server error");case 6:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"freeApples",value:function(){return this.axios.get(A("freeApples"))}}]),e}()),U={render:function(){var e=this.$createElement,t=this._self._c||e;return this.text?t("div",{staticClass:"alert"},[this._v("\n  "+this._s(this.text)+"\n")]):this._e()},staticRenderFns:[]};var w=n("VU/8")({props:["text"],name:"Alert"},U,!1,function(e){n("Jie8")},"data-v-a7697658",null).exports,I={props:{listItem:{},list:{type:Array,default:function(){return[]}}},name:"List"},$={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("ul",e._l(e.list,function(t,r){return n("li",{key:r},[e.listItem?n(e.listItem,{tag:"component",attrs:{item:t}},[e._v(e._s(t))]):[e._v(e._s(t))]],2)}))},staticRenderFns:[]};var B=n("VU/8")(I,$,!1,function(e){n("sQGY")},"data-v-9b7fa096",null).exports,S={components:{List:B},name:"Basket",computed:{basket:function(){return this.$store.state.basket}}},C={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",[t("List",{attrs:{list:this.basket}})],1)},staticRenderFns:[]};var E=n("VU/8")(S,C,!1,function(e){n("qS+2")},"data-v-2af87478",null).exports,R={render:function(){var e=this.$createElement;return(this._self._c||e)("div",{staticClass:"loading-spinner"})},staticRenderFns:[]};var y={components:{Loading:n("VU/8")({name:"Loading"},R,!1,function(e){n("YBX8")},"data-v-7d291955",null).exports},name:"Button",props:{color:{validator:function(e){return-1!==["red","green"].indexOf(e)},default:"green"},size:{validator:function(e){return-1!==["small","normal"].indexOf(e)},default:"normal"},loading:{type:Boolean,default:function(){return!1}}},computed:{classes:function(){var e=["button","button__"+this.color,"button__"+this.size];return this.loading&&e.push("button__loading"),e}}},F={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("button",{class:e.classes,attrs:{disabled:e.loading},on:{click:function(t){e.$emit("click")}}},[e._t("default"),e._v(" "),e.loading?n("Loading"):e._e()],2)},staticRenderFns:[]};var V=n("VU/8")(y,F,!1,function(e){n("R3Qj")},"data-v-8eab12e0",null).exports,O={props:["item"],components:{Button:V},methods:{grub:function(){this.$store.dispatch("grub",this.item.id)}},computed:{loading:function(){return this.$store.state.loading[this.item.id]},text:function(){var e=this.item;return e.name+" has "+e.apples.length+" apples"}},name:"UserListItem"},G={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"user_item"},[this._v("\n  "+this._s(this.text)+"\n  "),t("Button",{attrs:{loading:this.loading,size:"small",color:"red"},on:{click:this.grub}},[this._v("Grab apple")])],1)},staticRenderFns:[]};var M=n("VU/8")(O,G,!1,function(e){n("OW6U")},"data-v-93a95e4c",null).exports,W={components:{List:B,Button:V},computed:{users:function(){return this.$store.state.users},ListItem:function(){return M},freeApplesLoading:function(){return this.$store.state.loading.freeApples}},name:"UserList",methods:{freeApples:function(){this.$store.dispatch("freeApples")}}},H={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"user-list"},[t("List",{attrs:{list:this.users,"list-item":this.ListItem}}),this._v(" "),t("div",{staticClass:"user-list_center-button"},[t("Button",{attrs:{loading:this.freeApplesLoading},on:{click:this.freeApples}},[this._v("Free Aplles")])],1)],1)},staticRenderFns:[]};var X={components:{UserList:n("VU/8")(W,H,!1,function(e){n("nXdh")},"data-v-1b0f4dea",null).exports,Button:V,Basket:E},name:"ApplesApp"},Y={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"apples-app"},[t("div",{staticClass:"apples-app_left"},[t("h3",[this._v("Users")]),this._v(" "),t("UserList")],1),this._v(" "),t("div",{staticClass:"apples-app_right"},[t("h3",[this._v("Basket")]),this._v(" "),t("Basket")],1)])},staticRenderFns:[]};var j=n("VU/8")(X,Y,!1,function(e){n("Ivg2")},"data-v-27a82def",null).exports,Q={render:function(){this.$createElement;this._self._c;return this._m(0)},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("header",[t("div",{staticClass:"container"},[t("div",{staticClass:"brand"},[this._v("SITE")])])])}]};var z={name:"App",components:{Alert:w,Header:n("VU/8")({name:"Header"},Q,!1,function(e){n("bPvG")},"data-v-1bf80320",null).exports,ApplesApp:j},computed:{loading:function(){return this.$store.state.initialLoading},error:function(){return this.$store.state.errorMessage}}},J={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",{attrs:{id:"app"}},[t("Alert",{attrs:{text:this.error}}),this._v(" "),t("Header"),this._v(" "),t("div",{staticClass:"container"},[this.loading?this._e():t("ApplesApp")],1)],1)},staticRenderFns:[]};var N=n("VU/8")(z,J,!1,function(e){n("Rv09")},null,null).exports,P={initialLoading:function(e){var t=this,n=e.commit;return c()(i.a.mark(function e(){var r;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n("fetchInitialState"),r=void 0,e.prev=2,e.next=5,l.a.all([L.users(),L.basket()]);case 5:r=e.sent,e.next=13;break;case 8:return e.prev=8,e.t0=e.catch(2),n("error","Internal server error"),n("initialLoadingComplete"),e.abrupt("return");case 13:n("fetchUsersSuccess",r[0]),n("fetchBasketSuccess",r[1]),n("initialLoadingComplete");case 16:case"end":return e.stop()}},e,t,[[2,8]])}))()},updateUsersAndBasket:function(e){var t=this,n=e.commit;return c()(i.a.mark(function e(){var r;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=void 0,e.prev=1,e.next=4,l.a.all([L.users(),L.basket()]);case 4:r=e.sent,e.next=11;break;case 7:return e.prev=7,e.t0=e.catch(1),n("error","Internal server error"),e.abrupt("return");case 11:n("fetchUsersSuccess",r[0]),n("fetchBasketSuccess",r[1]);case 13:case"end":return e.stop()}},e,t,[[1,7]])}))()},grub:function(e,t){var n=this,r=e.commit,s=e.dispatch;return c()(i.a.mark(function e(){return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r("grub",t),e.prev=1,e.next=4,L.grub(t);case 4:e.next=11;break;case 6:return e.prev=6,e.t0=e.catch(1),r("error",e.t0.message),r("grubSuccess",t),e.abrupt("return");case 11:return e.next=13,s("updateUsersAndBasket");case 13:r("grubSuccess",t);case 14:case"end":return e.stop()}},e,n,[[1,6]])}))()},freeApples:function(e){var t=this,n=e.commit,r=e.dispatch;return c()(i.a.mark(function e(){return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n("freeApples"),e.prev=1,e.next=4,L.freeApples();case 4:e.next=11;break;case 6:return e.prev=6,e.t0=e.catch(1),n("error","Internal server error"),n("freeApplesSuccess"),e.abrupt("return");case 11:return e.next=13,r("updateUsersAndBasket");case 13:n("freeApplesSuccess");case 14:case"end":return e.stop()}},e,t,[[1,6]])}))()}},q=n("bOdI"),T=n.n(q),D=n("Dd8w"),Z=n.n(D),K={fetchInitialState:function(e){e.initialLoading=!0},fetchUsersSuccess:function(e,t){e.users=t},fetchBasketSuccess:function(e,t){e.basket=t},initialLoadingComplete:function(e){e.initialLoading=!1},error:function(e,t){e.errorMessage=t},grub:function(e,t){e.loading=Z()({},e.loading,T()({},t,!0))},grubSuccess:function(e,t){e.loading=Z()({},e.loading,T()({},t,!1))},freeApples:function(e){e.loading=Z()({},e.loading,{freeApples:!0})},freeApplesSuccess:function(e){e.loading=Z()({},e.loading,{freeApples:!1})}},ee={users:[],basket:[],initialLoading:!1,errorMessage:"",loading:{}};window.api=L,r.a.use(s.a),r.a.config.productionTip=!1,new r.a({el:"#app",store:new s.a.Store({state:ee,mutations:K,actions:P}),beforeCreate:function(){this.$store.dispatch("initialLoading")},components:{App:N},template:"<App/>"})},OW6U:function(e,t){},R3Qj:function(e,t){},Rv09:function(e,t){},YBX8:function(e,t){},bPvG:function(e,t){},nXdh:function(e,t){},"qS+2":function(e,t){},sQGY:function(e,t){}},["NHnr"]);
//# sourceMappingURL=app.b7903a3706eb363dd810.js.map